# Storyboard Studio - 패치노트

## 버전 2.0.0 (2024.12.20)

### 🎨 주요 기능 업데이트 - 협업 워크플로우 대폭 개선

이번 업데이트는 그림 작가와의 원활한 커뮤니케이션을 위한 5가지 핵심 기능을 추가했습니다.

---

### ✨ 새로운 기능

#### 1. 📸 이미지 뷰 모드 개선
- **문제 해결**: 초안/아트워크 동시 선택 시 아무것도 표시되지 않던 버그 수정
- **새로운 방식**: 라디오 버튼 방식으로 변경
- **특징**:
  - 한 번에 하나의 이미지만 선택 가능
  - 직관적인 UI로 혼동 방지
  - 선택된 이미지 타입 명확하게 표시

#### 2. 🔄 비교 모드 자동 표시
- **이전**: 버튼을 클릭해야만 이미지 표시
- **현재**: 비교 모드 활성화 시 즉시 양쪽 이미지 표시
- **특징**:
  - 초안과 아트워크를 나란히 자동 표시
  - 각 이미지에 라벨 추가 ("초안", "아트워크")
  - 주석 오버레이도 함께 표시 가능

#### 3. ➕ 씬 추가 기능
- **새로운 기능**: 씬을 동적으로 추가 가능
- **구현 내용**:
  - 사이드바 하단에 "씬 추가" 버튼 추가
  - 모달을 통한 씬 정보 입력
    - 씬 제목 (필수)
    - 씬 설명 (선택)
  - 추가된 씬으로 자동 이동
  - 씬 번호 자동 할당

#### 4. ✏️ 주석 그리기 기능 (AnnotationCanvas)
- **핵심 기능**: 원본 이미지를 수정하지 않고 위에 그리기 가능
- **도구 모음**:
  - 🖊️ 펜 도구
  - 🗑️ 지우개
  - ⬜ 사각형 그리기
  - ⭕ 원 그리기
  - 📝 텍스트 추가
- **편의 기능**:
  - 12가지 색상 팔레트
  - 브러시 크기 조절 (1-20)
  - 실행 취소/재실행 (최대 50단계)
  - PNG 파일로 다운로드
  - 배경 이미지 반투명 표시
- **연동 기능**:
  - 댓글과 연동되어 저장
  - "주석 보기/숨기기" 토글
  - 각 댓글별 개별 주석 관리

#### 5. 📋 워크플로우 상태 개선
- **새로운 상태 추가**: `revision_complete` (수정 완료)
- **개선된 플로우**:
  ```
  초안 대기 → 초안 완료 → 아트워크 검토중 
  → 수정 요청 → [신규] 수정 완료 → 최종 승인
  ```
- **새로운 버튼**:
  - "수정 완료" 버튼 (보라색)
  - 아이콘 추가로 시각적 구분 강화
- **상태별 색상 코딩**:
  - 수정 완료: 보라색 배지
  - 각 상태별 명확한 색상 구분

---

### 🔧 기술적 개선사항

#### TypeScript 개선
- `ImageViewMode` 타입 추가
- `AnnotationCanvas` 컴포넌트 타입 정의
- Props 인터페이스 최적화

#### 상태 관리 최적화
- `imageViewMode` 상태로 이미지 선택 관리
- `annotations` 객체로 씬별 주석 관리
- `showAnnotation` 상태로 캔버스 표시 제어

#### UI/UX 개선
- 일관된 버튼 스타일링
- 호버 효과 추가
- 모달 애니메이션
- 반응형 레이아웃 개선

---

### 📦 새로운 컴포넌트

#### AnnotationCanvas.tsx
- **크기**: 460줄
- **기능**: 독립적인 주석 그리기 컴포넌트
- **특징**: 재사용 가능한 모듈형 설계

---

### 🐛 버그 수정
- ✅ 초안/아트워크 동시 선택 시 화면 공백 버그 해결
- ✅ 비교 모드에서 이미지가 표시되지 않던 문제 수정
- ✅ 상태 전환 시 UI 업데이트 지연 문제 해결

---

### 📊 성능 개선
- 이미지 로딩 최적화
- 캔버스 렌더링 성능 향상
- 히스토리 관리 메모리 최적화 (최대 50개 제한)

---

### 🎯 현재 상태
- ✅ 모든 신규 기능 정상 작동
- ✅ GitHub 배포 완료
- ✅ Railway 자동 재배포 진행 중
- ✅ TypeScript 컴파일 에러 없음

---

### 📝 사용 가이드

#### 주석 그리기 사용법
1. 상단 툴바에서 "주석" 버튼 클릭
2. 도구 선택 (펜, 지우개, 도형, 텍스트)
3. 색상 및 크기 설정
4. 이미지 위에 그리기
5. 저장 버튼으로 댓글에 첨부

#### 씬 추가 방법
1. 사이드바 하단 "씬 추가" 버튼 클릭
2. 씬 제목 입력 (필수)
3. 씬 설명 입력 (선택)
4. 추가 버튼 클릭

#### 수정 요청 워크플로우
1. 아트워크 업로드 후 "수정 요청" 클릭
2. 주석 도구로 수정 사항 표시
3. 피드백 작성 및 전송
4. 작가가 수정 후 "수정 완료" 클릭
5. 검토 후 "최종 승인" 클릭

---

### 🔄 다음 업데이트 예정 (v2.1.0)
- [ ] 주석 레이어 다중 관리
- [ ] 버전 히스토리 기능
- [ ] 실시간 협업 기능
- [ ] 주석 그룹화 기능
- [ ] PDF 내보내기
- [ ] 이메일 알림 시스템
- [ ] 다국어 지원

---

### 📞 피드백
프로젝트 관련 추가 기능 요청이나 버그 리포트는 GitHub Issues를 통해 제출해주세요.

---

### 📈 통계
- **추가된 코드**: +2,074줄
- **수정된 파일**: 14개
- **새로운 컴포넌트**: 1개
- **개선된 기능**: 5개

---

**Last Updated**: 2024.12.20
**Version**: 2.0.0
**Status**: Production Deployed 🚀
**Commit**: 391c743