# Studio - 패치노트

## 버전 2.2.1 (2024.12.20) - 주요 버그 수정

### 🐛 버그 수정 완료

#### 1. ✅ 주석 저장 후 댓글 표시
- **문제**: 주석을 저장해도 댓글 목록에 표시되지 않음
- **원인**: 주석 저장 시 댓글 추가 함수가 제대로 호출되지 않음
- **해결**: `handleAnnotationSave` 함수에서 `addComment` 호출 확인 및 수정
- **결과**: 주석 저장 시 자동으로 댓글 목록에 추가됨

#### 2. ✅ 댓글 입력란 위치 개선
- **문제**: 댓글 입력란이 너무 위에 위치함
- **원인**: CommentSection 컴포넌트 구조 문제
- **해결**: 댓글 입력란을 CommentSection 하단으로 이동
- **결과**: 더 직관적인 UI 배치

#### 3. ✅ 댓글 표시 문제 해결
- **문제**: 6개의 댓글을 작성해도 표시되지 않음
- **원인**: CommentSection에 `currentScene` prop이 전달되지 않음
- **해결**: 필요한 props 모두 전달 및 필터링 로직 수정
- **결과**: 현재 씬의 댓글이 정상적으로 표시됨

#### 4. ✅ 활동 기록 표시 구현
- **문제**: 활동 탭에 아무것도 표시되지 않음
- **원인**: 활동 기록 저장 및 표시 로직 누락
- **해결**: 
  - `activityLog` state 추가
  - 모든 주요 활동에 대한 로깅 구현
  - 활동 유형별 색상 구분 표시
- **결과**: 모든 활동이 시간순으로 표시됨

#### 5. ✅ 초안 직접그리기 저장 기능
- **문제**: 초안 직접그리기 후 저장해도 업로드되지 않음
- **원인**: pendingSketch 데이터가 실제 이미지로 저장되지 않음
- **해결**: `handleAddComment`에서 pendingSketch가 있을 때 실제 이미지로 저장하는 로직 추가
- **결과**: 스케치가 정상적으로 저장되고 표시됨

#### 6. ✅ 재업로드 플로우 추가
- **문제**: 초안/아트워크 수정 시 재업로드할 수 있는 방법이 없음
- **원인**: 이미지가 있을 때 업로드 버튼이 숨겨짐
- **해결**: 이미지가 있어도 재업로드 버튼을 우측 상단에 표시
- **결과**: 언제든지 새로운 이미지로 교체 가능

#### 7. ✅ 씬 설명 편집 기능 추가
- **문제**: 씬에 대한 설명을 추가/수정할 수 있는 방법이 없음
- **원인**: 읽기 전용으로만 표시됨
- **해결**: 
  - 정보 탭에 편집 버튼 추가
  - 편집 모드 구현 (제목, 설명, 나레이션, 사운드)
  - 저장/취소 기능 구현
- **결과**: 씬 정보를 언제든지 수정 가능

---

### ✨ 추가 개선사항

#### 활동 기록 상세 구현
- 댓글 추가, 수정요청, 주석 추가
- 이미지 업로드 (초안/아트워크)
- 스케치 추가
- 씬 정보 수정
- 각 활동 유형별 색상 구분:
  - 🔵 일반 댓글
  - 🟣 스케치
  - 🟢 아트워크
  - 🟠 주석
  - ⚫ 기타 활동

#### UI/UX 개선
- 재업로드 버튼 스타일링 개선
- 활동 기록 시간 표시 형식 개선
- 편집 모드 전환 애니메이션 부드럽게 처리

---

### 📊 기술적 변경사항

#### 수정된 파일
- `src/components/SceneView.tsx`
  - 219줄 추가, 48줄 삭제
  - 주요 기능 로직 개선

#### 추가된 State
```typescript
const [activityLog, setActivityLog] = useState<Array<{
  id: number; 
  type: string; 
  user: string; 
  time: string; 
  content: string
}>>([]);

const [editingInfo, setEditingInfo] = useState(false);
const [editedSceneInfo, setEditedSceneInfo] = useState({
  title: '',
  description: '',
  narration: '',
  sound: ''
});
```

---

### 🚀 배포 정보
- **커밋 해시**: be4b07a
- **배포 시간**: 2024.12.20 오후
- **Railway 자동 배포**: 진행중

---

### 📝 사용 가이드

#### 재업로드 기능 사용법
1. 이미지가 있는 상태에서 우측 상단 "재업로드" 버튼 클릭
2. 새로운 이미지 선택
3. 자동으로 교체됨

#### 씬 정보 편집
1. 정보 탭에서 "편집" 버튼 클릭
2. 원하는 정보 수정
3. "저장" 버튼으로 저장 또는 "취소"로 이전 상태 유지

#### 활동 기록 확인
1. 우측 사이드바에서 "활동" 탭 클릭
2. 모든 활동이 시간순으로 표시됨
3. 색상으로 활동 유형 구분 가능

---

### 🔄 다음 업데이트 예정 (v2.3.0)
- [ ] 실시간 협업 기능 (WebSocket)
- [ ] 버전 간 비교 기능
- [ ] 버전 복원 기능
- [ ] 댓글 알림 시스템
- [ ] 자동 저장 기능
- [ ] 드래그 앤 드롭 파일 업로드

---

### 🙏 감사의 말

신속한 버그 리포트 감사합니다. 
모든 이슈가 해결되어 더욱 안정적인 서비스를 제공할 수 있게 되었습니다.

---

## 이전 버전 히스토리

### 버전 2.2.0 (2024.12.20)
- React 성능 최적화
- 컴포넌트 모듈화
- 키보드 단축키 추가
- 에러 처리 강화

### 버전 2.1.0 (2024.12.20)
- 버전 히스토리 관리
- 비교 모드 주석 숨김
- 초대코드 시스템
- 어드민 계정 추가

### 버전 2.0.0 (2024.12.20)
- 주석 그리기 기능
- 씬 추가 기능
- 워크플로우 개선

---

**Last Updated**: 2024.12.20  
**Current Version**: 2.2.1  
**Status**: Production Ready 🚀  
**GitHub Repository**: https://github.com/gatat123/art  
**Production URL**: https://art-production-a9ab.up.railway.app/

---

### 📞 문의사항

프로젝트 관련 문의사항이나 추가 버그 리포트는 GitHub Issues를 통해 제출해주세요.

---

**© 2024 Studio. All rights reserved.**