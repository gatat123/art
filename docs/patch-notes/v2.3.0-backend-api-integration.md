# Studio - 패치노트

## 버전 2.3.0 (2025.08.30) - 백엔드 API 연동

### 🚀 주요 업데이트

이번 업데이트는 프론트엔드를 실제 백엔드 API와 연동하는 작업을 수행했습니다.

---

### ✨ 구현된 기능

#### 1. 📡 API 클라이언트 생성
- **위치**: `src/lib/api.ts`
- **기능**: 
  - 통합 API 클라이언트 모듈 생성
  - JWT 토큰 기반 인증 헤더 자동 추가
  - 에러 핸들링 및 응답 처리
  - 환경별 API URL 자동 설정 (개발/프로덕션)

#### 2. 🔐 인증 시스템 API 연동
- **수정 파일**: `src/components/AuthForm.tsx`
- **변경사항**:
  - 실제 백엔드 로그인/회원가입 API 호출
  - JWT 토큰 저장 및 관리
  - 백엔드 연결 실패 시 데모 계정 폴백
  - 회원가입 시 비밀번호 최소 6자 검증

#### 3. 🏢 스튜디오 관리 API 연동
- **수정 파일**: `src/components/StudioList.tsx`
- **변경사항**:
  - 스튜디오 목록 API에서 실시간 가져오기
  - 스튜디오 생성 시 백엔드 API 호출
  - 에러 발생 시 로컬 폴백 지원
  - useEffect로 컴포넌트 마운트 시 자동 로드

#### 4. 📋 프로젝트 관리 API 연동
- **수정 파일**: `src/components/ProjectListView.tsx`
- **변경사항**:
  - 스튜디오별 프로젝트 목록 API 연동
  - 프로젝트 데이터 매핑 및 변환
  - 로딩 상태 관리 추가

---

### 🔧 기술적 개선사항

#### API 모듈 구조
```typescript
- authApi: 인증 관련 (login, register, verify)
- studiosApi: 스튜디오 관리
- projectsApi: 프로젝트 관리
- scenesApi: 씬 관리
- imagesApi: 이미지 업로드/삭제
- commentsApi: 댓글 시스템
- usersApi: 사용자 프로필/활동
```

#### 환경변수 설정
- `NEXT_PUBLIC_API_URL`: 프로덕션 API URL
- `NEXT_PUBLIC_API_URL_LOCAL`: 로컬 개발 API URL

---

### 🛡️ 안정성 개선

#### 에러 핸들링
- API 호출 실패 시 적절한 에러 메시지 표시
- 네트워크 오류 시 로컬 폴백 지원
- ApiError 클래스로 상태 코드별 처리

#### 토큰 관리
- localStorage에 JWT 토큰 자동 저장
- 모든 API 요청에 자동으로 토큰 첨부
- 토큰 만료 시 재로그인 유도

---

### 📊 현재 진행 상태

#### 완료된 Phase
- ✅ Phase 1: 백엔드 기본 구조 설정
- ✅ Phase 2: 데이터베이스 설정
- ✅ Phase 3: 인증 시스템 구현
- ✅ Phase 4: 핵심 API 구현 (모든 routes)
- ✅ Phase 5: 메인 서버 설정
- 🔄 Phase 6: 프론트엔드 API 연동 (진행중)

#### Phase 6 세부 진행상황
- ✅ API 클라이언트 생성
- ✅ 인증 시스템 연동
- ✅ 스튜디오 관리 연동
- ✅ 프로젝트 목록 연동
- ⏳ 씬 관리 연동 (대기중)
- ⏳ 이미지 업로드 연동 (대기중)
- ⏳ 댓글 시스템 연동 (대기중)

---

### 🔄 다음 작업 예정

1. **SceneView 컴포넌트 API 연동**
   - 씬 목록 가져오기
   - 씬 생성/수정/삭제
   - 이미지 업로드 기능

2. **댓글 시스템 API 연동**
   - 댓글 작성/수정/삭제
   - 답글 기능
   - 주석 데이터 저장

3. **이미지 업로드 시스템**
   - Multer 기반 파일 업로드
   - 썸네일 자동 생성
   - WebP 변환

4. **활동 로그 표시**
   - 사용자 활동 내역
   - 실시간 업데이트

---

### 🐛 알려진 이슈

- 백엔드 서버가 실행되지 않은 경우 일부 기능이 로컬 모드로 동작
- 초대코드 시스템은 아직 백엔드와 완전히 연동되지 않음

---

### 📝 개발 가이드

#### 로컬 개발 시작하기
```bash
# 프론트엔드
cd storyboard-collab
npm run dev

# 백엔드 (별도 터미널)
cd backend
npm start
```

#### API 테스트
- Postman 또는 Thunder Client 사용 권장
- JWT 토큰은 Authorization 헤더에 `Bearer {token}` 형식으로 전달

---

### 🙏 피드백

API 연동 관련 문제나 개선사항이 있으면 GitHub Issues로 제보해주세요.

---

**Last Updated**: 2025.08.30  
**Current Version**: 2.3.0  
**Status**: Development (Phase 6 진행중)  
**GitHub Repository**: https://github.com/gatat123/art  
**Production URL**: https://art-production-a9ab.up.railway.app/

---

**© 2025 Studio. All rights reserved.**
